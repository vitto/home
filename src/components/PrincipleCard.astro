---
import Icon from './Icon.astro';
import Badge from './Badge.astro';

/**
 * PrincipleCard Component
 *
 * Displays a card for a design principle with icon, title, category badge, and link
 *
 * Props:
 * @param {string} id - Principle ID/slug
 * @param {string} title - Principle title
 * @param {string} description - Principle description
 * @param {string} category - Category name
 * @param {string} icon - Icon name
 * @param {string} color - Color theme (e.g., "status-success", "label-blue")
 * @param {string} href - Link URL to the use case page
 * @param {string} class - Additional CSS classes
 */

interface Props {
  id: string;
  title: string;
  description: string;
  category: string;
  icon?: string;
  color: string;
  href: string;
  class?: string;
}

const {
  id,
  title,
  description,
  category,
  icon = 'mi/baseline/palette',
  color,
  href,
  class: className = '',
} = Astro.props;

// Map color names to CSS classes
const colorClasses: Record<string, string> = {
  'status-success':
    'group-[&:is(:hover,:focus-visible)]:bg-status-success-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-status-success-05 bg-status-success-10',
  'status-info':
    'group-[&:is(:hover,:focus-visible)]:bg-status-info-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-status-info-05 bg-status-info-10',
  'status-error':
    'group-[&:is(:hover,:focus-visible)]:bg-status-error-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-status-error-05 bg-status-error-10',
  'status-warning':
    'group-[&:is(:hover,:focus-visible)]:bg-status-warning-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-status-warning-05 bg-status-warning-10',
  'label-amaranth':
    'group-[&:is(:hover,:focus-visible)]:bg-label-amaranth-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-amaranth-05 bg-label-amaranth-10',
  'label-orchid':
    'group-[&:is(:hover,:focus-visible)]:bg-label-orchid-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-orchid-05 bg-label-orchid-10',
  'label-violet':
    'group-[&:is(:hover,:focus-visible)]:bg-label-violet-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-violet-05 bg-label-violet-10',
  'label-blue':
    'group-[&:is(:hover,:focus-visible)]:bg-label-blue-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-blue-05 bg-label-blue-10',
  'label-sky':
    'group-[&:is(:hover,:focus-visible)]:bg-label-sky-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-sky-05 bg-label-sky-10',
  'label-aqua':
    'group-[&:is(:hover,:focus-visible)]:bg-label-aqua-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-aqua-05 bg-label-aqua-10',
  'label-green':
    'group-[&:is(:hover,:focus-visible)]:bg-label-green-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-green-05 bg-label-green-10',
  'label-lime':
    'group-[&:is(:hover,:focus-visible)]:bg-label-lime-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-lime-05 bg-label-lime-10',
  'label-yellow':
    'group-[&:is(:hover,:focus-visible)]:bg-label-yellow-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-yellow-05 bg-label-yellow-10',
  'label-orange':
    'group-[&:is(:hover,:focus-visible)]:bg-label-orange-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-orange-05 bg-label-orange-10',
};

const categoryColorClass = colorClasses[color] || 'bg-tone-neutral-09 text-tone-neutral-05';
---

<a
  href={href}
  class={`group inline-flex flex-col no-underline focus-bounce rounded-3xl ${className}`}
  data-principle-id={id}
  data-category={category}
>
  <div
    class="principle-card grid gap-200 tablet:aspect-square rounded-3xl align-self-start auto-rows-min grid-rows-[auto_auto_1fr_auto] tablet:grid-rows-[auto_1fr_auto] text-tone-neutral-03 p-600 desktop:p-400 group-hover:-translate-y-200 shadow-sm-sharp transition bg-tone-neutral dark:bg-tone-neutral-09 group-[&:is(:hover,:focus-visible)]:bg-tone-neutral dark:group-[&:is(:hover,:focus-visible)]:bg-tone-neutral-08 ease-out-expo duration-500"
  >
    <div
      class={`p-200 rounded-full inline-flex justify-self-start transition-[color,background-color,border-color,padding,border-radius] group-[&:is(:hover,:focus-visible)]:px-600 ease-out-expo duration-500 ${categoryColorClass}`}
    >
      <Icon name={icon} />
    </div>
    <h3 class="text-title-h2 tablet:text-title-h5 font-black principle-card-title">
      {title}
    </h3>
    <p class="text-info-detail tablet:hidden">
      {description}
    </p>
    <div class="flex gap-400 items-center">
      <Badge
        class={`shrink-0 ease-out-expo duration-500 transition-[background-color,color,padding] group-[&:is(:hover,:focus-visible)]:px-200 ${categoryColorClass}`}
      >
        {category}
      </Badge>
    </div>
  </div>
</a>
