---
import Icon from './Icon.astro';
import Badge from './Badge.astro';

/**
 * PrincipleCard Component
 *
 * Displays a card for a design principle with icon, title, category badge, and link
 *
 * Props:
 * @param {string} id - Principle ID/slug
 * @param {string} title - Principle title
 * @param {string} category - Category name
 * @param {string} icon - Icon name
 * @param {string} color - Color theme (e.g., "status-success", "label-blue")
 * @param {string} href - Link URL to the use case page
 * @param {string} class - Additional CSS classes
 */

interface Props {
  id: string;
  title: string;
  category: string;
  icon?: string;
  color: string;
  href: string;
  class?: string;
}

const {
  id,
  title,
  category,
  icon = 'mi/baseline/palette',
  color,
  href,
  class: className = '',
} = Astro.props;

// Map color names to CSS classes
const colorClasses: Record<string, string> = {
  'status-success':
    'group-[&:is(:hover,:focus-visible)]:bg-status-success-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-status-success-05 border-status-success-05/30',
  'status-info':
    'group-[&:is(:hover,:focus-visible)]:bg-status-info-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-status-info-05 border-status-info-05/30',
  'status-error':
    'group-[&:is(:hover,:focus-visible)]:bg-status-error-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-status-error-05 border-status-error-05/30',
  'status-warning':
    'group-[&:is(:hover,:focus-visible)]:bg-status-warning-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-status-warning-05 border-status-warning-05/30',
  'label-amaranth':
    'group-[&:is(:hover,:focus-visible)]:bg-label-amaranth-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-amaranth-05 border-label-amaranth-05/30',
  'label-orchid':
    'group-[&:is(:hover,:focus-visible)]:bg-label-orchid-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-orchid-05 border-label-orchid-05/30',
  'label-violet':
    'group-[&:is(:hover,:focus-visible)]:bg-label-violet-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-violet-05 border-label-violet-05/30',
  'label-blue':
    'group-[&:is(:hover,:focus-visible)]:bg-label-blue-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-blue-05 border-label-blue-05/30',
  'label-sky':
    'group-[&:is(:hover,:focus-visible)]:bg-label-sky-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-sky-05 border-label-sky-05/30',
  'label-aqua':
    'group-[&:is(:hover,:focus-visible)]:bg-label-aqua-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-aqua-05 border-label-aqua-05/30',
  'label-green':
    'group-[&:is(:hover,:focus-visible)]:bg-label-green-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-green-05 border-label-green-05/30',
  'label-lime':
    'group-[&:is(:hover,:focus-visible)]:bg-label-lime-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-lime-05 border-label-lime-05/30',
  'label-yellow':
    'group-[&:is(:hover,:focus-visible)]:bg-label-yellow-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-yellow-05 border-label-yellow-05/30',
  'label-orange':
    'group-[&:is(:hover,:focus-visible)]:bg-label-orange-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral text-label-orange-05 border-label-orange-05/30',
};

const categoryColorClass = colorClasses[color] || 'bg-tone-neutral-09 text-tone-neutral-05';
---

<a
  href={href}
  class={`group inline-flex flex-col no-underline focus-bounce ${className}`}
  data-principle-id={id}
  data-category={category}
>
  <div
    class="grid aspect-square rounded-3xl align-self-start auto-rows-min grid-rows-[auto_1fr_auto] text-tone-neutral-03 p-600 group-hover:-translate-y-200 shadow-sm-sharp transition bg-tone-neutral/80 backdrop-blur group-[&:is(:hover,:focus-visible)]:bg-tone-neutral ease-out-expo duration-1000"
  >
    <div class="flex items-center gap-400 mb-400">
      <div
        class={`p-200 rounded-lg inline-flex justify-self-start transition origin-left group-[&:is(:hover,:focus-visible)]:scale-125 ease-out-expo duration-1000 border border-solid ${categoryColorClass}`}
      >
        <Icon name={icon} />
      </div>
    </div>
    <h3 class="text-title-h3 mobile:text-title-h4">{title}</h3>
    <div class="flex gap-400 items-center">
      <Badge class={`shrink-0 ease-out-expo duration-1000 ${categoryColorClass}`}>
        {category}
      </Badge>
      <div
        class="inline-flex gap-400 opacity-0 group-[&:is(:hover,:focus-visible)]:opacity-100 transition min-h-600"
      >
        <mds-text text="â†’" animation="yugop" data-principle-text={id}></mds-text>
      </div>
    </div>
  </div>
</a>
