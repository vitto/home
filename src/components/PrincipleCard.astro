---
import Icon from './Icon.astro';
import Badge from './Badge.astro';

/**
 * PrincipleCard Component
 *
 * Displays a card for a design principle with icon, title, category badge, and link
 *
 * Props:
 * @param {string} id - Principle ID/slug
 * @param {string} title - Principle title
 * @param {string} description - Principle description
 * @param {string} category - Category name
 * @param {string} icon - Icon name
 * @param {string} color - Color theme (e.g., "status-success", "label-blue")
 * @param {string} href - Link URL to the use case page
 * @param {string} class - Additional CSS classes
 * @param {boolean} draft - Whether the principle is a draft
 */

interface Props {
  id: string;
  title: string;
  description: string;
  category: string;
  icon?: string;
  color: string;
  href: string;
  class?: string;
  draft?: boolean;
}

const {
  id,
  title,
  description,
  category,
  icon = 'mi/baseline/palette',
  color,
  href,
  class: className = '',
} = Astro.props;

// Map color names to CSS classes
const iconColorClasses: Record<string, string> = {
  'status-success': 'text-status-success-05 bg-status-success-10',
  'status-info': 'text-status-info-05 bg-status-info-10',
  'status-error': 'text-status-error-05 bg-status-error-10',
  'status-warning': 'text-status-warning-05 bg-status-warning-10',
  'label-amaranth': 'text-label-amaranth-05 bg-label-amaranth-10',
  'label-orchid': 'text-label-orchid-05 bg-label-orchid-10',
  'label-violet': 'text-label-violet-05 bg-label-violet-10',
  'label-blue': 'text-label-blue-05 bg-label-blue-10',
  'label-sky': 'text-label-sky-05 bg-label-sky-10',
  'label-aqua': 'text-label-aqua-05 bg-label-aqua-10',
  'label-green': 'text-label-green-05 bg-label-green-10',
  'label-lime': 'text-label-lime-05 bg-label-lime-10',
  'label-yellow': 'text-label-yellow-05 bg-label-yellow-10',
  'label-orange': 'text-label-orange-05 bg-label-orange-10',
};

const cardColorClasses: Record<string, string> = {
  'status-success':
    'group-[&:is(:hover,:focus-visible)]:bg-status-success-05 data-[filtered=true]:bg-status-success-05 data-[filtered=true]:dark:bg-status-success-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral data-[filtered=true]:text-status-success-08 data-[filtered=true]:dark:text-status-success-10 text-status-success-01 bg-status-success-10 dark:bg-status-success-09',
  'status-info':
    'group-[&:is(:hover,:focus-visible)]:bg-status-info-05 data-[filtered=true]:bg-status-info-05 data-[filtered=true]:dark:bg-status-info-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral data-[filtered=true]:text-status-info-08 data-[filtered=true]:dark:text-status-info-10 text-status-info-01 bg-status-info-10 dark:bg-status-info-09',
  'status-error':
    'group-[&:is(:hover,:focus-visible)]:bg-status-error-05 data-[filtered=true]:bg-status-error-05 data-[filtered=true]:dark:bg-status-error-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral data-[filtered=true]:text-status-error-08 data-[filtered=true]:dark:text-status-error-10 text-status-error-01 bg-status-error-10 dark:bg-status-error-09',
  'status-warning':
    'group-[&:is(:hover,:focus-visible)]:bg-status-warning-05 data-[filtered=true]:bg-status-warning-05 data-[filtered=true]:dark:bg-status-warning-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral data-[filtered=true]:text-status-warning-08 data-[filtered=true]:dark:text-status-warning-10 text-status-warning-01 bg-status-warning-10 dark:bg-status-warning-09',
  'label-amaranth':
    'group-[&:is(:hover,:focus-visible)]:bg-label-amaranth-05 data-[filtered=true]:bg-label-amaranth-05 data-[filtered=true]:dark:bg-label-amaranth-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral data-[filtered=true]:text-label-amaranth-08 data-[filtered=true]:dark:text-label-amaranth-10 text-label-amaranth-01 bg-label-amaranth-10 dark:bg-label-amaranth-09',
  'label-orchid':
    'group-[&:is(:hover,:focus-visible)]:bg-label-orchid-05 data-[filtered=true]:bg-label-orchid-05 data-[filtered=true]:dark:bg-label-orchid-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral data-[filtered=true]:text-label-orchid-08 data-[filtered=true]:dark:text-label-orchid-10 text-label-orchid-01 bg-label-orchid-10 dark:bg-label-orchid-09',
  'label-violet':
    'group-[&:is(:hover,:focus-visible)]:bg-label-violet-05 data-[filtered=true]:bg-label-violet-05 data-[filtered=true]:dark:bg-label-violet-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral data-[filtered=true]:text-label-violet-08 data-[filtered=true]:dark:text-label-violet-10 text-label-violet-01 bg-label-violet-10 dark:bg-label-violet-09',
  'label-blue':
    'group-[&:is(:hover,:focus-visible)]:bg-label-blue-05 data-[filtered=true]:bg-label-blue-05 data-[filtered=true]:dark:bg-label-blue-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral data-[filtered=true]:text-label-blue-08 data-[filtered=true]:dark:text-label-blue-10 text-label-blue-01 bg-label-blue-10 dark:bg-label-blue-09',
  'label-sky':
    'group-[&:is(:hover,:focus-visible)]:bg-label-sky-05 data-[filtered=true]:bg-label-sky-05 data-[filtered=true]:dark:bg-label-sky-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral data-[filtered=true]:text-label-sky-08 data-[filtered=true]:dark:text-label-sky-10 text-label-sky-01 bg-label-sky-10 dark:bg-label-sky-09',
  'label-aqua':
    'group-[&:is(:hover,:focus-visible)]:bg-label-aqua-05 data-[filtered=true]:bg-label-aqua-05 data-[filtered=true]:dark:bg-label-aqua-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral data-[filtered=true]:text-label-aqua-08 data-[filtered=true]:dark:text-label-aqua-10 text-label-aqua-01 bg-label-aqua-10 dark:bg-label-aqua-09',
  'label-green':
    'group-[&:is(:hover,:focus-visible)]:bg-label-green-05 data-[filtered=true]:bg-label-green-05 data-[filtered=true]:dark:bg-label-green-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral data-[filtered=true]:text-label-green-08 data-[filtered=true]:dark:text-label-green-10 text-label-green-01 bg-label-green-10 dark:bg-label-green-09',
  'label-lime':
    'group-[&:is(:hover,:focus-visible)]:bg-label-lime-05 data-[filtered=true]:bg-label-lime-05 data-[filtered=true]:dark:bg-label-lime-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral data-[filtered=true]:text-label-lime-08 data-[filtered=true]:dark:text-label-lime-10 text-label-lime-01 bg-label-lime-10 dark:bg-label-lime-09',
  'label-yellow':
    'group-[&:is(:hover,:focus-visible)]:bg-label-yellow-05 data-[filtered=true]:bg-label-yellow-05 data-[filtered=true]:dark:bg-label-yellow-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral data-[filtered=true]:text-label-yellow-08 data-[filtered=true]:dark:text-label-yellow-10 text-label-yellow-01 bg-label-yellow-10 dark:bg-label-yellow-09',
  'label-orange':
    'group-[&:is(:hover,:focus-visible)]:bg-label-orange-05 data-[filtered=true]:bg-label-orange-05 data-[filtered=true]:dark:bg-label-orange-05 group-[&:is(:hover,:focus-visible)]:text-tone-neutral data-[filtered=true]:text-label-orange-08 data-[filtered=true]:dark:text-label-orange-10 text-label-orange-01 bg-label-orange-10 dark:bg-label-orange-09',
};

const categoryColorClass = iconColorClasses[color] || 'bg-tone-neutral-09 text-tone-neutral-05';
const cardColorClass = cardColorClasses[color] || 'bg-tone-neutral-09 text-tone-neutral-05';
const iconHoverClass =
  'group-hover:rounded-b-3xl group-hover:rounded-t-md group-hover:px-600 group-hover:-translate-y-250';
const iconFocusClass =
  'group-focus-visible:rounded-b-3xl group-focus-visible:rounded-t-md group-focus-visible:px-600 group-focus-visible:-translate-y-250';
---

<a
  href={href}
  class={`inline-flex group flex-col no-underline focus-bounce rounded-3xl ${className}`}
  data-principle-id={id}
  data-category={category}
>
  <div
    class={`principle-card grid gap-200 mobile:gap-400 tablet:aspect-square rounded-3xl align-self-start auto-rows-min grid-rows-[auto_auto_1fr_auto] tablet:grid-rows-[auto_1fr_auto] p-600 desktop:p-400 group-hover:-translate-y-200 transition ease-out-expo duration-500 text-tone-neutral-03 ${cardColorClass}`}
  >
    <div
      class={`p-200 rounded-3xl inline-flex justify-self-start transition-cosmetic ease-out-expo duration-500 ${categoryColorClass} ${iconHoverClass} ${iconFocusClass}`}
    >
      <Icon class="mobile:text-[36px]" name={icon} />
    </div>
    <h3 class="text-title-h2 tablet:text-title-h5 font-black principle-card-title">
      {title}
    </h3>
    <!-- <p class="text-info-detail tablet:hidden">
      {description}
    </p> -->
    <div class="flex gap-400 items-center">
      <Badge
        class={`shrink-0 ease-out-expo duration-500 transition-cosmetic group-[&:is(:hover,:focus-visible)]:px-200 ${categoryColorClass}`}
      >
        {category}
      </Badge>
    </div>
  </div>
</a>
