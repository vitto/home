---
import brandsData from '../data/brands.json';

interface Props {
  name: string;
  url?: string;
  class?: string;
  size?: 'sm' | 'md' | 'lg';
}

const { name = 'storybook', url: urlOverride, size = 'md', class: className = '' } = Astro.props;
const baseUrl = import.meta.env.BASE_URL;
const brandsPath = `${baseUrl}/assets/brands`;

// Find brand by id
const brand = brandsData.find((b) => b.id.toLowerCase() === name.toLowerCase());

if (!brand) {
  throw new Error(`Brand with id "${name}" not found in brands.json`);
}

// Use override url if provided, otherwise use default from JSON
const brandUrl = urlOverride || brand.url;
const logoPath = brand.logo ? `${brandsPath}/${brand.logo}` : null;

const logoSizeClass = {
  sm: 'w-auto h-400',
  md: 'w-auto h-500',
  lg: 'w-auto h-600',
}[size];

const containerSizeClass = {
  sm: 'py-150 px-300',
  md: 'py-200 px-400',
  lg: 'py-300 px-500',
}[size];
---

<a
  href={brandUrl}
  target="_blank"
  rel="noreferrer noopener"
  tabindex="0"
  title={`Go to ${brand.name} website`}
  class={`inline-flex shrink-0 items-center focus-bounce justify-center bg-tone-neutral shadow-sm-sharp rounded-full ${containerSizeClass} ${className}`}
>
  <img src={logoPath} alt={`${brand.name} logo`} class={logoSizeClass} />
</a>
