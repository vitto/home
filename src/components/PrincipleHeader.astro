---
import Icon from './Icon.astro';
import Badge from './Badge.astro';

/**
 * PrincipleHeader Component
 *
 * Displays the header section for a principle page with icon, badge, title, and description
 *
 * Props:
 * @param {object} principle - Principle object with icon, color, category, title, description
 * @param {string} sectionName - Name of the section (e.g., "User-Centered Design", "Design Systems", "HAX Principles")
 * @param {string} sectionPath - Path to the section page (e.g., "/user-centered-design")
 * @param {string} class - Additional CSS classes
 */
interface Props {
  principle: {
    icon: string;
    category: string;
    title: string;
    description: string;
  };
  categoryColors: Record<string, string>;
  sectionName: string;
  sectionPath: string;
  class?: string;
}

const { principle, categoryColors, sectionName, sectionPath, class: className = 'grid gap-600' } = Astro.props;

const baseUrl = import.meta.env.BASE_URL;
const categoryUrl = `${baseUrl}${sectionPath}?category=${encodeURIComponent(principle.category)}`;

// Map color names to CSS classes for icon background

const colorClasses: Record<string, string> = {
  'status-success': 'bg-status-success-05',
  'status-info': 'bg-status-info-05',
  'status-error': 'bg-status-error-05',
  'status-warning': 'bg-status-warning-05',
  'label-amaranth': 'bg-label-amaranth-05',
  'label-orchid': 'bg-label-orchid-05',
  'label-violet': 'bg-label-violet-05',
  'label-blue': 'bg-label-blue-05',
  'label-sky': 'bg-label-sky-05',
  'label-aqua': 'bg-label-aqua-05',
  'label-green': 'bg-label-green-05',
  'label-lime': 'bg-label-lime-05',
  'label-yellow': 'bg-label-yellow-05',
  'label-orange': 'bg-label-orange-05',
};

const categoryColor = categoryColors[principle.category] || '';
const categoryColorClass = colorClasses[categoryColor] || '';
---

<div class={className}>
  <div class="flex items-center gap-400">
    <div class={`inline-flex p-200 px-600 rounded-full text-tone-neutral ${categoryColorClass}`}>
      <Icon name={principle.icon} />
    </div>
    <div class="grid">
      <h6 class="text-title-h6">{sectionName}</h6>
      <a
        href={categoryUrl}
        class="inline-flex no-underline focus-bounce justify-self-start rounded-md"
      >
        <Badge
          class={`px-200 text-tone-neutral justify-self-start ${categoryColorClass}`}
          font="text-info-option"
        >
          {principle.category}
        </Badge>
      </a>
    </div>
  </div>
  <div class="grid gap-200">
    <h1 class="text-title-h1">{principle.title}</h1>
    <p class="text-info-paragraph">{principle.description}</p>
  </div>
</div>
