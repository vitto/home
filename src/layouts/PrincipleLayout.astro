---
import SectionLayout from './SectionLayout.astro';
import Section from '../components/Section.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import PrincipleHeader from '../components/PrincipleHeader.astro';
import UseCaseInteractive from '../components/UseCaseInteractive.astro';
import Button from '../components/Button.astro';
import Icon from '../components/Icon.astro';
interface Props {
  title: string;
  principle: {
    icon: string;
    category: string;
    title: string;
    description: string;
  };
  categoryColors: Record<string, string>;
  sectionName: string;
  sectionPath: string;
}

const baseUrl = import.meta.env.BASE_URL;
const { title, principle, categoryColors, sectionName, sectionPath } = Astro.props;
---

<script is:inline>
  // Global utility function to find the UseCase article and container for the current script
  // This function can be called with an id, or it will try to find the article containing the calling script
  window.getUseCaseScope = function getUseCaseScope(id) {
    let article = null;

    if (id) {
      // If id is provided, use it directly
      article = document.getElementById(id);
    } else {
      // Otherwise, try to find the article containing the current script
      const currentScript = document.currentScript;
      if (currentScript) {
        article = currentScript.closest('article');
      }
    }

    if (!article) return null;

    const articleId = article.getAttribute('id');
    if (!articleId) return null;

    const container = article.querySelector('.use-case-interactive');
    if (!container) return null;

    return {
      article: article,
      articleId: articleId,
      container: container,
    };
  };
</script>
<SectionLayout title={title}>
  <Section contentClass="gap-1200 mobile:gap-600">
    <Header />
    <PrincipleHeader
      principle={principle}
      categoryColors={categoryColors}
      sectionName={sectionName}
      sectionPath={sectionPath}
    />
    <slot />
    <div class="h-50 bg-tone-neutral-03"></div>
    <Button href={baseUrl} variant="outline" class="justify-self-center">
      <Icon name="mi/baseline/arrow-back" />
      Back to Home
    </Button>
  </Section>
</SectionLayout>
<Footer />
