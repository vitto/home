---
import UseCaseLayout from '../../layouts/UseCaseLayout.astro';
import data from '../../data/design-systems.json';
import PrincipleNav from '../../components/PrincipleNav.astro';
import Markdown from '../../components/Markdown.astro';
import Usage from '../../components/Usage.astro';
import UsageItem from '../../components/UsageItem.astro';
import Bibliography from '../../components/Bibliography.astro';
import BibliographyItem from '../../components/BibliographyItem.astro';
import BibliographySection from '../../components/BibliographySection.astro';
const principle = data.principles.find((p) => p.id === 'single-source-of-truth')!;
const baseUrl = import.meta.env.BASE_URL;
const sectionPath = '/design-systems';
---

<UseCaseLayout
  title={`${principle.title} - Design Systems`}
  principle={principle}
  categoryColors={data.categoryColors}
  sectionName={data.title}
  sectionPath="/design-systems"
>
  <article class="grid gap-600">
    <Markdown
      content={`
When I design a design system, I treat it as the **single authoritative source** for components, patterns, accessibility rules, and behavioral decisions.

This approach reduces ambiguity, subjective interpretation, and divergence between design and development.

In practice, I have consistently observed that when multiple "sources of truth" coexist—design files, local implementations, undocumented patterns—teams start to:

- duplicate solutions,
- rebuild components locally,
- and make visual or technical decisions outside the system.

For this reason, anything that is not expressed within the design system should not be considered official.
Every extension or change must pass through the system itself, in an explicit, documented, and versioned way.

The goal is not control, but **clarity**: enabling teams to trust the system and focus on product work rather than interpretation and reconciliation.
    `}
    />
    <Markdown
      content={`
## Approach

---

#### Storybook as the primary reference

In a production design system I worked on, Storybook was intentionally positioned as the **operational source of truth**, not as a secondary showcase.

[Magma Design System Storybook](https://magma.maggiolicloud.it/storybook/)`}
    />
    <Usage>
      <UsageItem variant="do">
        Centralize components, variants, and states in a single, shared environment.
      </UsageItem>
      <UsageItem variant="dont">
        Treat design files or screenshots as the primary authority.
      </UsageItem>
      <UsageItem variant="do">
        Use Storybook as a common reference for designers and developers.
      </UsageItem>
      <UsageItem variant="dont">
        Consider documentation as something derived after implementation rather than part of the
        system itself.
      </UsageItem>
    </Usage>
    <Markdown
      content={`
  #### Components designed as public APIs

  Components were defined as stable contracts rather than flexible local implementations.
    `}
    />
    <Usage>
      <UsageItem variant="do">Expose a limited and intentional set of properties.</UsageItem>
      <UsageItem variant="dont">Expose internal implementation details for convenience.</UsageItem>
      <UsageItem variant="do">
        Document supported behaviors and constraints as part of the public API.
      </UsageItem>
      <UsageItem variant="dont">
        Allow arbitrary overrides that introduce uncontrolled divergence.
      </UsageItem>
    </Usage>
    <Markdown
      content={`
  #### CI/CD pipelines as alignment mechanisms

  The build and deployment pipeline was used not only for distribution, but as a **mechanism for enforcing coherence** between design and development.
    `}
    />
    <Usage>
      <UsageItem variant="do">Automate validation and publishing processes.</UsageItem>
      <UsageItem variant="dont">Rely on manual releases.</UsageItem>
      <UsageItem variant="do">
        Separate environments to make the actual state of the system explicit.
      </UsageItem>
      <UsageItem variant="dont">
        Allow discrepancies between documented components and shipped code.
      </UsageItem>
    </Usage>

    <Markdown
      content={`
  #### Explicit processes for system changes

  Design system evolution was handled through clearly defined and traceable processes.
  `}
    />

    <Usage>
      <UsageItem variant="do">
        Provide official channels for proposing new features or changes.
      </UsageItem>
      <UsageItem variant="dont">Accept informal or undocumented modifications.</UsageItem>
      <UsageItem variant="do">Make decisions visible and shared across disciplines.</UsageItem>
      <UsageItem variant="dont">Prioritize urgency over long-term system integrity.</UsageItem>
    </Usage>

    <Markdown
      content={`
  #### Accessibility embedded in the source of truth

  Accessibility requirements were integrated directly into the design system rather than treated as external guidelines.
  `}
    />

    <Usage>
      <UsageItem variant="do">Treat accessibility as a baseline requirement.</UsageItem>
      <UsageItem variant="dont">Apply accessibility fixes downstream.</UsageItem>
      <UsageItem variant="do">Make constraints visible to both designers and developers.</UsageItem>
      <UsageItem variant="dont">
        Separate accessibility rules from the components that implement them.
      </UsageItem>
    </Usage>

    <Markdown
      content={`
  #### Why this principle matters

  A single source of truth is not about enforcing rigidity.

  It is about:

  - reducing decision noise,
  - increasing confidence in the system,
  - preventing the silent fragmentation that turns design systems into optional libraries.

  Without this principle, a design system inevitably becomes:

  - a theoretical reference,
  - a partially adopted toolkit,
  - or a document that teams gradually ignore.
  `}
    />
  </article>
  <Bibliography
    opener="The concepts behind this principle align with established thinking in design systems and software architecture:"
    closer="These references inform the principle, but the implementation described above is grounded in real-world application rather than theory."
  >
    <BibliographySection type="books">
      <BibliographyItem
        author="Brad Frost"
        title="Atomic Design"
        description="Emphasizes composability and centralized systems as a way to manage complexity."
        url="https://atomicdesign.bradfrost.com/"
      />
    </BibliographySection>
    <BibliographySection type="urls">
      <BibliographyItem
        author="Nathan Curtis"
        title="Modular Design Systems"
        description="Discusses ownership, authority, and the importance of a clear system boundary."
        status="missing"
        url="https://modulardesignsystem.com/"
      />
      <BibliographyItem
        author="Alla Kholmatova"
        title="Design Systems"
        description="Explores how systems fail when authority and documentation are unclear."
        url="https://www.smashingmagazine.com/design-systems-book/"
      />
      <BibliographyItem
        author="Google Material Design Team"
        title="Design Systems at Scale"
        description="Highlights the role of shared sources and tooling in cross-team alignment."
        status="missing"
        url="https://material.io/design/systems/design-systems-at-scale.html"
      />
      <BibliographyItem
        author="Storybook Team"
        title="Design Systems for Developers"
        description="Frames Storybook as infrastructure rather than presentation."
        status="missing"
        url="https://storybook.js.org/docs/design-systems-for-developers/"
      />
    </BibliographySection>
  </Bibliography>

  <PrincipleNav
    baseUrl={baseUrl}
    currentPrincipleId={principle.id}
    sectionPath={sectionPath}
    allPrinciples={data.principles}
  />
</UseCaseLayout>
