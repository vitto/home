---
import CategoryLayout from '../layouts/CategoryLayout.astro';
import PrincipleCard from '../components/PrincipleCard.astro';
import Principles from '../components/Principles.astro';
import Nav from '../components/Nav.astro';
import SectionNav from '../components/SectionNav.astro';
import data from '../data/human-centered-ai-design.json';
// import Blob from '../components/Blob.astro';
// import blobConfigs from '../data/blob-configs.json';
// const blobConfig = blobConfigs['human-centered-ai-design'];

// Get base URL from Astro config and normalize it
// Remove trailing slash if present (except for root)
const rawBaseUrl = import.meta.env.BASE_URL;
const baseUrl = rawBaseUrl === '/' ? '' : rawBaseUrl.replace(/\/$/, '');
const sectionPath = '/human-centered-ai-design';

// Sort principles by title
const sortedPrinciples = [...data.principles].sort((a, b) => a.title.localeCompare(b.title));
---

<CategoryLayout
  title="Human-Centered AI Design - Vittorio's Portfolio"
  sectionTitle={data.title}
  sectionDescription={data.description}
  categories={data.categories}
>
  <Principles>
    {
      sortedPrinciples
        .filter((principle) => !(principle as any).draft)
        .map((principle) => (
          <PrincipleCard
            id={principle.id}
            title={principle.title}
            description={principle.description}
            category={principle.category}
            icon={principle.icon}
            color={
              data.categoryColors[principle.category as keyof typeof data.categoryColors] || ''
            }
            href={`${baseUrl}/human-centered-ai-design/${principle.id}`}
          />
        ))
    }
  </Principles>
  <div class="h-50 bg-tone-neutral-03 max-w-screen-desktop mx-auto mt-1200"></div>
  <Nav>
    <SectionNav baseUrl={baseUrl} sectionPath={sectionPath} principles={false} />
  </Nav>
</CategoryLayout>
